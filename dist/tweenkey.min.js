!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=t.Tweenkey=n():t.Tweenkey=n()}(this,function(){"use strict";function t(t,n){return function(e){return n?typeof e===t:B.call(e)===t}}function n(t,n){var e=!L(n),r=t.a;do{for(var i=r.properties.length;i--;){var o=r.properties[i];o.enabled&&(e||n.indexOf(o.name)>-1)&&(o.enabled=!1,delete Mt[o.id])}}while(r=r.next)}function e(t){var n=t.a;do{for(var e=n.properties.length;e--;){var r=n.properties[e];r.enabled&&(Mt[r.id]&&Mt[r.id]!==r&&(Mt[r.id].enabled=!1,delete Mt[r.id]),Mt[r.id]=r)}}while(n=n.next)}function r(t){var n=t.a;do{for(var e=n.properties.length;e--;)n.properties[e].refresh()}while(n=n.next)}function i(t,n,e){return U(t)&&U(n)&&U(e)?At:M.test(t)&&M.test(n)&&M.test(e)?Tt:L(t)&&L(n)&&L(e)?Pt:U(t)&&L(n)&&U(e)?Ft:Et}function o(t,n,e,r,i){this.id=t,this.name=n,this.target=e,this.origProps=r,this.targetProps=i,this.enabled=!0,this.length=0}function s(t){this.b=!1;var n=t.shift();if(!("object"==typeof n&&t.length>0))throw"Invalid Tween";return p(this,n,t),this}function u(t){var n=t.a,e=0;do{for(var r=!1,i=n.properties.length;i--;){var o=n.properties[i];if(o.enabled&&o.type!==Et){switch(o.type){case Pt:for(var s=n.target[o.name],u=0;u<o.length;u++){var a=o.start[u],c=o.end[u]-a;s[u]=t.c(t.d,a,c)}break;case At:n.target[o.name]=t.c(t.d,o.start,o.end);break;case Ft:var f=o.waypoints.length-1,h=f*t.d,l=G.floor(h),p=t.c(h-l,o.waypoints[l],o.waypoints[l+1>f?f:l+1]);n.target[o.name]=p;break;case Tt:var v=t.d,d=t.c(v,o.colorStart[0],o.colorEnd[0]),m=t.c(v,o.colorStart[1],o.colorEnd[1]),l=t.c(v,o.colorStart[2],o.colorEnd[2]),y=(255*d<<16)+(255*m<<8)+(255*l|0);n.target[o.name]="#"+y.toString(16)}r=o.type!==Et}else n.properties.splice(i,1)}e+=0|r}while(n=n.next);return e}function a(t,n){var i=n*t.e;if(t.f>0){var o=V(i,0,t.f);t.f-=o,i-=o}if(0==t.f){t.g&&(t.g=!1,r(t),e(t)),t.h||(t.h=!0,t.i(t.j)),t.k+=i*t.l,t.k<0&&(t.k=0),t.d=1,t.m>0&&(t.d=G.round(t.k/t.m*1e4)/1e4,t.d>1&&(t.d=1),t.d<0&&(t.d=0));u(t)>0?t.n(t.j):t.kill()}(0===t.f&&1==t.l&&t.k>=t.m||t.l==-1&&0==t.k)&&t.o&&(t.p>0&&t.p--,0==t.p?(t.q(t.j),t.kill()):(t.r?t.l*=-1:t.k=0,t.f=t.s,t.t(t.j)))}function c(t,n,e){for(var r,i,s=L(t.j)?t.j:[t.j],u=Object.keys(n),a=Object.keys(e),c=0;c<a.length;c++)n[a[c]]||u.push(a[c]);for(var f=s.length;f--;){var h=s[f];h.u=h.u||Rt++;for(var l=[],p=0;p<u.length;p++){var v=u[p];if(!t.hasOwnProperty(v)&&v in h){var d=new o(h.u+v,v,h,e,n);d.refresh(),l.push(d)}}var m={target:h,properties:l};i=i||m,r&&(r.next=m),r=m}t.a=i}function f(t){var n=jt.indexOf(t);n!==-1&&(jt.splice(n,1),t.v=!1)}function h(t){t.v||(c(t,t.w,t.x),jt.push(t),t.v=!0,t.g=!0,t.h=!1)}function l(t){if(Ot[t])return Ot[t];if(L(t)&&4==t.length)return It(tt.apply(this,t));if(void 0!=t){var n=Object.keys(Ot).join(" | ");console.warn("Invalid easing name: "+t),console.warn("Available easings: "+n)}return Ot.linear}function p(t,n,e){var r=e.shift(),i=e.shift();J(r)&&(i=r,r=0);var o=U(i.delay)?G.max(0,i.delay):0,s=U(i.repeat)?i.repeat:0;t.j=n,t.h=!1,t.v=!1,t.g=!0,t.l=1,t.d=0,t.k=0,t.o=!0,t.y=o,t.f=o,t.r=!!H(i.yoyo)&&i.yoyo,t.z=t.r?-1:s,t.p=t.z,t.c=l(i.ease),t.x=J(i.from)?i.from:{},t.w=J(i.to)?i.to:{},t.s=U(i.repeatDelay)?G.max(0,i.repeatDelay):0,t.e=U(i.timeScale)&&i.timeScale>0?i.timeScale:1,t.m=U(r)?G.max(0,r):0,t.A=!H(i.autoStart)||i.autoStart,t.i=R(i.onStart)?i.onStart:X,t.n=R(i.onUpdate)?i.onUpdate:X,t.q=R(i.onComplete)?i.onComplete:X,t.t=R(i.onRepeat)?i.onRepeat:X,t.b=!H(i.initted)||i.initted,t.B=i}function v(t,n,e,r){if(!U(n))return!1;var e=!!H(e)&&e,i=e?t.m+t.y:t.m;n=V(n,0,r?i:1);var o=r?n:n*i;t.k=o,e&&o>t.y&&(t.f=o-(o-t.y),t.k-=t.f)}function d(t){return function(){for(var n=jt.length;n--;){var e=jt[n];e[t].apply(e,arguments)}}}function m(t){for(var n=jt.length;n--;)jt[n].o||(jt[n].v=!1,jt.splice(n,1));for(var n=0,e=jt.length;n<e;n++)jt[n].A&&a(jt[n],t)}function y(){var t=W(),n=!1;St.A&&(St.tick(t),n=!0);for(var e=xt.length;e--;){var r=xt[e];r.A&&(r.tick(t),n=!0),r.o||xt.splice(e,1)}n&&Q(y)}function g(t){var n=new k(t);return xt.push(n),n}function k(t){t=t||{},this.C=R(t.onTick)?t.onTick:X,this.o=!0,this.setFPS(t.fps),this.resume()}function w(t){t?St.resume():St.pause()}function b(t){t="number"==typeof t?t:St.D,t<0&&(t=0),!St.A&&m(t)}function I(){return function(){for(var t=arguments.length,n=[];t--;)n[t]=arguments[t];var e=new s(n);return e.b&&h(e),e}}function O(t){return t instanceof s?Ct:U(t)?zt:K(t)?Bt:R(t)?Qt:L(t)?qt:J(t)?Dt:Gt}function S(t,n){for(var e=!0,r=0;r<n.length;r++){var i=n[r],o=O(i);if(o==Gt)e=!1;else if(o==Bt)e=void 0!==t[i];else if(o==qt)e=S(t,i);else if(o==Dt)for(var s=Object.keys(i),u=0;u<s.length;u++){var a=s[u];if(!U(i[a])){e=!1;break}}if(!e){console.warn("Unknown label value:",i);break}}return e}function j(t,n,e,r){this.obj=t,this.type=n,this.start=e,this.end=r}function x(t,n){return K(n)?x(t,t[n]):n}function A(t,n){for(var e=!0,r=0;r<n.length;r++){var i=x(t,n[r]);if(K(i)){e=!1;break}L(i)?n[r]=A(t,i):n[r]=i}return e||(n=A(t,n)),$(n)}function P(t){var n=Z(t,"start");if(n<0)for(var e=G.abs(n),r=0;r<t.length;r++)t[r].start+=e,t[r].end+=e;return t}function T(t){return _(t,"end")-Z(t,"start")}function F(t,n,e){e=e||0;var r=[],i=x(t,n);i=L(i)?i:[i];for(var o=A(t,i),s=0;s<o.length;s++){var u=o[s],a=O(u);if(a==zt)e+=u;else{var c=e,f=e;if(a==Ct&&(f=c+u.duration()),a==Dt){for(var h=Object.keys(u),l=[],p=0,v=0;v<h.length;v++){var d=h[v];p=G.min(p,u[d]);var m=u[d]+e;l=l.concat(F(t,d,m))}r=r.concat(l),e+=T(l),e+=p<0?p:0}else r.push(new j(u,a,c,f)),e+=f-c}}return r}function E(t){t=t||{},this.timeScale(t.timeScale),this.delay(t.delay),this.yoyo(t.yoyo),this.l=1,this.F={},this.k=0,this.G=[],this.H="",this.I=g({onTick:this.tick.bind(this)}),this.I.pause()}function C(t){return new E(t)}var Q,q,D=window||{},z=D.performance,B={}.toString,G=Math,M=new RegExp(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i),R=t("function",!0),U=t("number",!0),H=t("boolean",!0),K=t("string",!0),L=Array.isArray||t("[object Array]",!1),J=function(t){return!!t&&t.constructor===Object},$=function(t){return[].concat.apply([],t)},N=function(t){var n=parseInt(t.slice(1),16);return[(n>>16&255)/255,(n>>8&255)/255,(255&n)/255]},V=function(t,n,e){return G.min(G.max(t,n),e)},W=function(){return z&&z.now&&z.now()||+new Date},X=function(){return!1},Y=function(t,n,e){return t.apply(G,n.map(function(t){return t[e]}))},Z=function(t,n){return Y(G.min,t,n)},_=function(t,n){return Y(G.max,t,n)},tt=function(){function t(t,n){return 1-3*n+3*t}function n(t,n){return 3*n-6*t}function e(t){return 3*t}function r(r,i,o){return((t(i,o)*r+n(i,o))*r+e(i))*r}function i(r,i,o){return 3*t(i,o)*r*r+2*n(i,o)*r+e(i)}function o(t,n,e,i,o){var s,u,f=0;do{u=n+(e-n)/2,s=r(u,i,o)-t,s>0?e=u:n=u}while(Math.abs(s)>a&&++f<c);return u}function s(t,n,e,o){for(var s=0;s<u;++s){var a=i(n,e,o);if(0===a)return n;n-=(r(n,e,o)-t)/a}return n}var u=4,a=1e-7,c=10,f=11,h=1/(f-1),l="function"==typeof Float32Array;return function(t,n,e,u){function a(n){for(var r=0,u=1,a=f-1;u!==a&&c[u]<=n;++u)r+=h;--u;var l=(n-c[u])/(c[u+1]-c[u]),p=r+l*h,v=i(p,t,e);return v>=.001?s(n,p,t,e):0===v?p:o(n,r,r+h,t,e)}if(!(0<=t&&t<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");var c=l?new Float32Array(f):new Array(f);if(t!==n||e!==u)for(var p=0;p<f;++p)c[p]=r(p*h,t,e);return function(i){return t===n&&e===u?i:0===i?0:1===i?1:r(a(i),n,u)}}}(),nt=function(t){return function(n){return G.pow(n,t)}},et=function(t){return function(n){return 1-G.abs(G.pow(n-1,t))}},rt=function(t){return function(n){return n<.5?nt(t)(2*n)/2:et(t)(2*n-1)/2+.5}},it=function(t){var n=1.70158;return t*t*((n+1)*t-n)},ot=function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},st=function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)},ut=function(t){return 1-at(1-t)},at=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},ct=function(t){return t<.5?.5*ut(2*t):.5*at(2*t-1)+.5},ft=function(t){return 0===t?0:1===t?1:-G.pow(2,10*(t-1))*G.sin(5*(t-1.1)*G.PI)},ht=function(t){return 0===t?0:1===t?1:G.pow(2,-10*t)*G.sin(5*(t-.1)*G.PI)+1},lt=function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*G.pow(2,10*(t-1))*G.sin(5*(t-1.1)*G.PI):.5*G.pow(2,-10*(t-1))*G.sin(5*(t-1.1)*G.PI)+1)},pt=function(t){return 1-G.sqrt(1-t*t)},vt=function(t){return G.sqrt(1- --t*t)},dt=function(t){return(t*=2)<1?-.5*(G.sqrt(1-t*t)-1):.5*(G.sqrt(1-(t-=2)*t)+1)},mt=function(t){return 1-G.cos(t*G.PI/2)},yt=function(t){return G.sin(t*G.PI/2)},gt=function(t){return.5*(1-G.cos(G.PI*t))},kt=function(t){return 0===t?0:G.pow(1024,t-1)},wt=function(t){return 1===t?1:1-G.pow(2,-10*t)},bt=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*G.pow(1024,t-1):.5*(2-G.pow(2,-10*(t-1)))},It=function(t){return function(n,e,r){return e+t(n)*(r-e)}},Ot={linear:It(rt(1)),BackIn:It(it),BackOut:It(ot),BackInOut:It(st),BounceIn:It(ut),BounceOut:It(at),BounceInOut:It(ct),CircIn:It(pt),CircOut:It(vt),CircInOut:It(dt),CubicIn:It(nt(3)),CubicOut:It(et(3)),CubicInOut:It(rt(3)),ElasticIn:It(ft),ElasticOut:It(ht),ElasticInOut:It(lt),ExpoIn:It(kt),ExpoOut:It(wt),ExpoInOut:It(bt),QuadIn:It(nt(2)),QuadOut:It(et(2)),QuadInOut:It(rt(2)),QuartIn:It(nt(4)),QuartOut:It(et(4)),QuartInOut:It(rt(4)),QuintIn:It(nt(5)),QuintOut:It(et(5)),QuintInOut:It(rt(5)),SineIn:It(mt),SineOut:It(yt),SineInOut:It(gt)};!function(){var t,n,e,r,i,o,s,u,a=0;t=["ms","moz","webkit","o"],n="AnimationFrame",e="request"+n,r="cancel"+n,Q=D[e],q=D[r];for(var i=t.lenght;!Q&&i--;)Q=D[t[i]+"Request"+n],q=D[t[i]+"Cancel"+n];Q=Q||function(t){return o=W(),s=G.max(0,16-(o-a)),u=setTimeout(function(){t(o+s)},s),a=o+s,u},q=q||function(t){clearTimeout(t)}}();var St,jt=[],xt=[],At=0,Pt=1,Tt=2,Ft=3,Et=4,Ct=0,Qt=1,qt=2,Dt=3,zt=4,Bt=5,Gt=6,Mt={},Rt=1;o.prototype.J=function(t,n){for(var e=this.target[this.name],r=G.max(t.length,n.length),i=0;i<r;i++)t[i]=void 0!=t[i]?t[i]:e[i],n[i]=void 0!=n[i]?n[i]:e[i];this.length=r},o.prototype.refresh=function(){this.start=this.origProps[this.name],void 0===this.start&&(this.start=this.target[this.name]),this.end=this.targetProps[this.name],void 0===this.end&&(this.end=this.target[this.name]),this.type=i(this.start,this.end,this.target[this.name]),this.type==Pt?this.J(this.start,this.end):this.type==Ft?this.waypoints=[this.start].concat(this.end):this.type==Tt&&(this.colorStart=N(this.start),this.colorEnd=N(this.end))},s.prototype={delay:function(t){return this.f=this.y=t,this},progress:function(t,n){return v(this,t,n,!1),this},time:function(t,n){return v(this,t,n,!0),this},render:function(){e(this),u(this)},restart:function(t,n){return t=!!H(t)&&t,n=!H(n)||n,this.k=0,this.d=0,this.f=t?this.y:0,this.o=!0,this.l=1,this.h=!1,this.resume(),(n||this.f>0)&&this.render(),this},reverse:function(){return this.l*=-1,this},timeScale:function(t){return U(t)&&t>0&&(this.e=t),this},kill:function(){if(arguments.length>0){for(var t=[],e=0;e<arguments.length;++e)t[e]=arguments[e];n(this,t)}else this.o=!1,this.A=!1;return this},pause:function(){return this.A=!1,this},resume:function(){return this.A=!0,h(this),this},stop:function(){return f(this),this},duration:function(){var t=this.e,n=this.m/t;if(this.z>1){var e=(this.z-1)*this.s;n=n*this.z+e/t}return n+this.y/t},toString:function(){return"[object Tween]"}},k.prototype={pause:function(){return this.A=!1,this},resume:function(){return this.K=W(),this.A=!0,Q(y),this},kill:function(){return this.o=!1,this},tick:function(t){var n=t-this.K;if(n>this.D){var e=n%this.D;this.K=t-e,this.C(G.min(n-e,2*this.D)/1e3)}return this},setFPS:function(t){this.fps=U(t)&&t>0?t:60,this.D=1e3/this.fps},toString:function(){return"[object Ticker]"}},E.prototype={let:function(t,n){var e=O(n);if(K(t)&&e!=Gt){if((e==qt||e==Dt)&&!S(this.F,n))return this;e==Ct&&n.stop(),this.F[t]=n,this.L=!0}},tick:function(t){this.M(),this.k+=t*this.e*direction;for(var n=0;n<this.G.length;n++){var e=this.G[n];(1==direction&&this.k>=e.start||direction==-1&&this.k<=e.end)&&(e.type==Ct&&(e.obj.k=this.k-e.start,a(e.obj,0)),(e.type=Qt)&&e.obj.apply(this))}},delay:function(t){this.y=U(t)?t:0},M:function(t){if(this.L){t=t||this.H;var n=F(this.F,t);this.G=P(n),this.m=T(this.G),this.L=!1}},plot:function(t){"undefined"!=typeof plotTimeline&&plotTimeline(this,t)},reverse:function(){this.l*=-1},yoyo:function(t){this.r=!!H(t)&&t},duration:function(){return this.M(),this.m},timeScale:function(t){this.e=U(t)?G.max(0,t):1},seek:function(){return this},pause:function(){return this.I.pause(),this},resume:function(){return this.I.resume(),this},play:function(t){return this.H=t,this.I.resume(),this},kill:function(){return this.I.kill(),this}},St=new k({onTick:m});var Ut=new function(){};return function(t,n,e){for(var r in n)(e||!(r in t))&&(t[r]=n[r]);return t}(Ut,{set:I(),tween:I(),killAll:d("kill"),killTweensOf:function(){console.log("todo")},pauseAll:d("pause"),resumeAll:d("resume"),timeline:C,ticker:g,update:b,autoUpdate:w,setFPS:St.setFPS.bind(St)})});