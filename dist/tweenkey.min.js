!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Tweenkey=n()}(this,function(){"use strict";function t(t,n){return function(r){return n?typeof r===t:Pt.call(r)===t}}function n(t,n,r){return t.apply(Math,n.map(function(t){return t[r]}))}function r(t){return!!t&&t.constructor===Object}function e(t){return void 0===t}function i(t){return[].concat.apply([],t)}function o(t){var n=parseInt(t.slice(1),16);return[(n>>16&255)/255,(n>>8&255)/255,(255&n)/255]}function a(t,n,r){return Math.min(Math.max(t,n),r)}function u(){return window.performance.now()}function s(){return!1}function h(t){return Math.round(1e3*t)/1e3}function c(t,r){return n(Math.min,t,r)}function f(t,r){return n(Math.max,t,r)}function l(t,n){var r=n||{};t.a=Bt(r.onStart)?r.onStart:s,t.b=Bt(r.onUpdate)?r.onUpdate:s,t.c=Bt(r.onComplete)?r.onComplete:s,t.d=Bt(r.onRepeat)?r.onRepeat:s}function p(t,n){var r=n||t.e||{},e=Tt(r.delay)?Math.max(0,r.delay):0,i=Tt(r.repeat)?r.repeat:0;t.f=!!qt(t.f)&&t.f,t.g=!!qt(r.inverted)&&r.inverted,t.h=0,t.i=1,t.j=0,t.k=0,t.l=0,t.m=0,t.n=e,t.o=!!qt(r.yoyo)&&r.yoyo,Tt(r.repeat)===!1&&t.o&&(i=-1),t.p=i,t.q=t.o===!0&&t.p===-1||t.p===-1,t.r=Tt(r.repeatDelay)?Math.max(0,r.repeatDelay):0,t.s=Tt(r.timeScale)&&r.timeScale>0?r.timeScale:1,t.t=!qt(r.autoStart)||r.autoStart,t.e=r}function v(t,n){n*=t.i,k(t,t.l+n*t.s,!0,!0)}function d(t){if(t.l>=t.n)return t.b.call(t,t.u),!0}function m(t){if(t.l>t.n){if(0===Math.max(0,t.m-t.n))return t.a.call(t.u||t),!0}}function g(t){if(t.l>=t.n&&h(t.l)===t.h&&!t.q&&t.m<t.l)return t.c.call(t,t.u),!0}function y(t){if(t.l>t.n&&(t.p>0||t.o)){var n=t.n,r=t.v+t.r,e=(t.l-n)/r,i=(t.m-n)/r,o=~i-~e,a=e>i?i:e;if(0!==o&&(t.q||Math.abs(a)<t.p))return t.d.call(t,t.u),!0}}function M(t){t.q||1!==t.k||(t.t=!1)}function w(t){var n=0,r=t.v,e=t.r,i=t.n;if(t.q)n=2*t.v,n+=i+2*e;else if(t.p>0){var o=(r+e)*t.p;n=r+o+i}else n=r+i;t.h=n}function b(t,n,r,e){n=a(n,0,1);var i=e?0:t.n,o=0;r?o=t.h:(o=t.v+t.r,o+=t.n),k(t,n*(o-i)+i,r)}function k(t,n){if(n=Math.max(0,n),t.m=t.l,t.l=n,t.l>t.h&&(t.q||(n=Math.min(t.h,n),t.l=n),n=(n-t.n-Ct)%t.h+t.n),t.k=h(n/t.h),n>t.n){n-=t.n;var r=t.v+Ct,e=n%(r+t.r);t.j=e<=r?h(e%r/r):1}else t.j=0;t.g&&(t.j=1-t.j)}function x(t){if(t.o&&t.l>t.v+t.n){var n=t.v+t.r+Ct,r=Math.max(0,t.l-t.n);return Math.ceil(r/n)%2==0?1-t.j:t.j}return t.j}function I(t){return function(n){return Math.pow(n,t)}}function O(t){return function(n){return 1-Math.abs(Math.pow(n-1,t))}}function S(t){return function(n){return n<.5?I(t)(2*n)/2:O(t)(2*n-1)/2+.5}}function F(t){var n=1.70158;return t*t*((n+1)*t-n)}function A(t){var n=1.70158;return--t*t*((n+1)*t+n)+1}function C(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}function E(t){return 1-j(1-t)}function j(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function P(t){return t<.5?.5*E(2*t):.5*j(2*t-1)+.5}function B(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)}function T(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1}function q(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}function Q(t){return 1-Math.sqrt(1-t*t)}function D(t){return Math.sqrt(1- --t*t)}function G(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function H(t){return 1-Math.cos(t*Math.PI/2)}function J(t){return Math.sin(t*Math.PI/2)}function N(t){return.5*(1-Math.cos(Math.PI*t))}function R(t){return 0===t?0:Math.pow(1024,t-1)}function z(t){return 1===t?1:1-Math.pow(2,-10*t)}function K(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function L(t){return function(n,r,e){return r+t(n)*(e-r)}}function U(t){if(Ht[t])return Ht[t];if(Dt(t)&&4==t.length)return L(Gt.apply(this,t));if(!e(t)){var n=Object.keys(Ht).join(" | ");console.warn("Invalid easing name: "+t),console.warn("Available easings: "+n)}return Ht.linear}function _(t){t.synced||(t.synced=!0,t.start=t.origProps[t.name],e(t.start)&&(t.start=t.target[t.name]),t.end=t.targetProps[t.name],e(t.end)&&(t.end=t.target[t.name]),t.type=$(t.start,t.end,t.target[t.name]),t.type==Nt?t.w(t.start,t.end):t.type==zt?t.waypoints=[t.start].concat(t.end):t.type==Rt&&(t.colorStart=o(t.start),t.colorEnd=o(t.end)))}function $(t,n,r){return Tt(t)&&Tt(n)&&Tt(r)?Jt:Et.test(t)&&Et.test(r)&&Et.test(n)?Rt:Dt(t)&&Dt(n)&&Dt(r)?Nt:Tt(t)&&Dt(n)&&Tt(r)?zt:Kt}function V(t){var n=t.x;do{for(var r=n.properties.length;r--;)n.properties[r].sync()}while(n=n.next)}function W(t,n){var r=!Dt(n),i=t.x;if(!e(i))do{for(var o=i.properties.length;o--;){var a=i.properties[o];a.enabled&&(r||n.indexOf(a.name)>-1)&&(a.enabled=!1,delete $t[a.id])}}while(i=i.next)}function X(t){var n=t.x;do{for(var r=n.properties.length;r--;){var e=n.properties[r];e.enabled&&($t[e.id]&&$t[e.id]!==e&&($t[e.id].enabled=!1,delete $t[e.id]),$t[e.id]=e)}}while(n=n.next)}function Y(t){var n=t.x,r=0;if(!e(n)){do{for(var i=x(t),o=!1,a=n.properties.length;a--;){var u=n.properties[a];if(u.enabled&&u.type!==Kt){switch(u.type){case Nt:for(var s=n.target[u.name],h=0;h<u.length;h++){var c=u.start[h],f=u.end[h]-c;s[h]=t.y(i,c,f)}break;case Jt:n.target[u.name]=t.y(i,u.start,u.end);break;case zt:var l=u.waypoints.length-1,p=l*i,v=Math.floor(p),d=t.y(p-v,u.waypoints[v],u.waypoints[v+1>l?l:v+1]);n.target[u.name]=d;break;case Rt:var m=t.y(i,u.colorStart[0],u.colorEnd[0]),g=t.y(i,u.colorStart[1],u.colorEnd[1]),v=t.y(i,u.colorStart[2],u.colorEnd[2]),y=(255*m<<16)+(255*g<<8)+(255*v|0);n.target[u.name]="#"+y.toString(16)}o=!0}}r+=0|o}while(n=n.next);return r}}function Z(t){for(var n,r,e=t.z,i=t.A,o=Dt(t.u)?t.u:[t.u],a=Object.keys(e),u=Object.keys(i),s=0;s<u.length;s++)e[u[s]]||a.push(u[s]);for(var h=o.length;h--;){var c=o[h];c.B=c.B||Vt++;for(var f=[],l=0;l<a.length;l++){var p=a[l];if(!t.hasOwnProperty(p)&&p in c){var v=new Lt(c.B+p,p,c,i,e);f.push(v)}}var d={target:c,properties:f};r=r||d,n&&(n.next=d),n=d}t.x=r}function tt(t,n,e,i){t.u=n,t.y=U(i.ease),t.A=r(i.from)?i.from:{},t.z=r(i.to)?i.to:{},t.v=Tt(e)?Math.max(0,e):0,t.e=i}function nt(t){var n=Object.keys(t.e),r=t.z;t.C===_t&&(r=t.A);for(var e=0;e<n.length;e++){var i=n[e];i in jt||i in r||(r[i]=t.e[i])}}function rt(t,n,r,e){tt(t,n,r,e),p(t,e),l(t,e),w(t),nt(t),t.t&&t.resume()}function et(t,n){if(e(t.x)&&(Z(t),V(t)),m(t)&&X(t),t.l>=t.n){Y(t)>0?d(t):t.clear()}else Y(t);y(t),g(t),M(t),n>0&&v(t,n)}function it(t,n){return function(e,i,o){if(t===Ut&&(o=i,i=0),r(e)&&r(o)&&Tt(i)){var a=new Wt(t,n);return rt(a,e,i,o),a}throw"Invalid Tween Params"}}function ot(){pn===!0&&(pn=!1,setTimeout(function(){ut()},1))}function at(t){t=Math.max(0,t);for(var n=0,r=fn.length;n<r;n++)fn[n].t&&et(fn[n],t)}function ut(){vn&&(st(ln),st(fn),vn=!1);for(var t=0;t<ln.length;t++)ln[t].tick(u());1===ln.length&&0===fn.length?pn=!0:cn(ut)}function st(t){for(var n=t.length;n--;){var r=t[n];r.t||(r.f=!1,t.splice(n,1))}}function ht(t){t.f||(fn.push(t),t.f=!0)}function ct(t){t.f||(ln.push(t),t.f=!0)}function ft(t){t.t?(t instanceof Wt&&ht(t),t instanceof Xt&&ct(t),ot()):vn=!0}function lt(t){var n=arguments;return function(){for(var r=fn.length;r--;){var e=fn[r];e[t].apply(e,n)}}}function pt(t){t?dn.resume():dn.pause()}function vt(t){t="number"==typeof t?t:dn.D,at(t)}function dt(t){dn.setFPS(t)}function mt(t,n){t.F(n);var r=t.G,e=Object.keys(t.H),o=function(t,n){return Array.apply(null,Array(t)).map(String.prototype.valueOf,n).join("")},a=function(t,n,r){var e=Math.round((t-r.length)/2),i=t-e-r.length;return o(e,n)+r+o(i,n)},u=function(t){t.unshift(o(~~(t.length/2),"%c%s")),console.log.bind(console).apply(window,t)},s="",h="padding: 4px 0;",c=t.h,f=(Math.round(10*c),[]);s="background: #E1BEE7; padding-bottom: 6px; border-bottom: 4px solid #ba9dbf;",f.push(["","\n\n"]),f.push([h+s,a(14," ",t.I)]),f.push([h," "]);for(var l=0;l<Math.ceil(c);l++)f.push([h,l+"s"]),f.push([h,o(9-l.toString().length," ")]);f.push(["","\n"]),s="background: #C5CAE9; padding-bottom: 4px;",f.push([s,a(7," ","Start")]),f.push([s,a(7," ","End")]),s="background: #D1C4E9; color:#B39DDB; padding-bottom: 1px;",f.push([s," "]);for(var p=0,v=0;v<Math.ceil(2*c);v++)f.push([s,p%1?"▫":"▾"]),f.push([s,o(4," ")]),p+=.5;u(i(f));for(var d=["E91E63","F44336","9C27B0","673AB7","3F51B5","2196F3"],m=0;m<r.length;m++){var g=r[m],y=o(Math.round(10*g.J),"∙"),M=Math.max(2,Math.round(10*(g.K-g.J)));s=a(M," ",function(t,n){return t.length>n&&(t=t.slice(0,n-1)+"…"),t}(function(n){for(var r=0;r<e.length;r++){var i=e[r];if(t.H[i]===n)return i}return"?"}(g.L),M));var w=d[m%d.length];u(i([["padding: 2px 0; background: #C5E1A5; color: black;",a(7," ",g.J.toFixed(2))],["padding: 2px 0; background: #FF5252; color: black;",a(7," ",g.K.toFixed(2))],["background: white; color: #802929;","  "],["background: white; color: #"+w,y],["color: white; background: #"+w,s]]))}}function gt(t,n){l(t,n),p(t,n)}function yt(t){t.v=kt(t.G),w(t)}function Mt(t,n){if(m(t),t.l>=t.n){wt(t);for(var r=0;r<t.G.length;r++){var e=t.G[r];e.C===gn&&et(e.L,0)}d(t)}y(t)&&bt(t,!0),g(t),M(t),v(t,n)}function wt(t){if(t.l>=t.n)for(var n=t.v*x(t),r=0;r<t.G.length;r++){var e=t.G[r];(1===t.i&&t.l>=e.J||t.i===-1&&t.l<=e.K)&&(e.C===gn?k(e.L,n-e.J):e.C===yn&&e.M&&(e.L.apply(t),e.M=!1))}}function bt(t,n){for(var r=0;r<t.G.length;r++){t.G[r].M=n}}function kt(t){return f(t,"_end")-c(t,"_start")}function xt(t,n,r){r=r||0;var e=[],i=It(t,n);i=Dt(i)?i:[i];for(var o=Ot(t,i),a=0;a<o.length;a++){var u=o[a],s=Ft(u);if(s==bn)r+=u;else{var h=r,c=r;if(s==gn&&(c=h+u.h),s==wn){for(var f=Object.keys(u),l=[],p=0,v=0;v<f.length;v++){var d=f[v];p=Math.min(p,u[d]);var m=u[d]+r;l=l.concat(xt(t,d,m))}e=e.concat(l),r+=kt(l),r+=p<0?p:0}else e.push(new mn(u,s,h,c)),r+=c-h}}return e}function It(t,n){return Qt(n)?It(t,t[n]):n}function Ot(t,n){for(var r=!0,e=0;e<n.length;e++){var o=It(t,n[e]);if(Qt(o)){r=!1;break}Dt(o)?n[e]=Ot(t,o):n[e]=o}return r||(n=Ot(t,n)),i(n)}function St(t){var n=c(t,"_start");if(n<0)for(var r=Math.abs(n),e=0;e<t.length;e++)t[e].J+=r,t[e].K+=r;return t}function Ft(t){return t instanceof Wt?gn:Tt(t)?bn:Qt(t)?kn:Bt(t)?yn:Dt(t)?Mn:r(t)?wn:xn}function At(t,n){for(var r=!0,i=0;i<n.length;i++){var o=n[i],a=Ft(o);if(a==xn)r=!1;else if(a==kn)r=!e(t[o]);else if(a==Mn)r=At(t,o);else if(a==wn)for(var u=Object.keys(o),s=0;s<u.length;s++){var h=u[s];if(!Tt(o[h])){r=!1;break}}if(!r){console.warn("Unknown label value:",o);break}}return r}var Ct=1e-6,Et=new RegExp(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i),jt={to:0,from:1,ease:2,yoyo:3,delay:4,repeat:5,onStart:6,inverted:7,onUpdate:8,autoStart:9,onComplete:10,repeatDelay:11,onRepeat:12},Pt={}.toString,Bt=t("function",!0),Tt=t("number",!0),qt=t("boolean",!0),Qt=t("string",!0),Dt=Array.isArray||t("[object Array]",!1),Gt=function(){function t(t,n){return 1-3*n+3*t}function n(t,n){return 3*n-6*t}function r(t){return 3*t}function e(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function i(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}function o(t,n,r,i,o){var a,u,c=0;do{u=n+(r-n)/2,a=e(u,i,o)-t,a>0?r=u:n=u}while(Math.abs(a)>s&&++c<h);return u}function a(t,n,r,o){for(var a=0;a<u;++a){var s=i(n,r,o);if(0===s)return n;n-=(e(n,r,o)-t)/s}return n}var u=4,s=1e-7,h=10,c=11,f=1/(c-1),l="function"==typeof Float32Array;return function(t,n,r,u){function s(n){for(var e=0,u=1,s=c-1;u!==s&&h[u]<=n;++u)e+=f;--u;var l=(n-h[u])/(h[u+1]-h[u]),p=e+l*f,v=i(p,t,r);return v>=.001?a(n,p,t,r):0===v?p:o(n,e,e+f,t,r)}if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");var h=l?new Float32Array(c):new Array(c);if(t!==n||r!==u)for(var p=0;p<c;++p)h[p]=e(p*f,t,r);return function(i){return t===n&&r===u?i:0===i?0:1===i?1:e(s(i),n,u)}}}(),Ht={linear:L(S(1)),BackIn:L(F),BackOut:L(A),BackInOut:L(C),BounceIn:L(E),BounceOut:L(j),BounceInOut:L(P),CircIn:L(Q),CircOut:L(D),CircInOut:L(G),CubicIn:L(I(3)),CubicOut:L(O(3)),CubicInOut:L(S(3)),ElasticIn:L(B),ElasticOut:L(T),ElasticInOut:L(q),ExpoIn:L(R),ExpoOut:L(z),ExpoInOut:L(K),QuadIn:L(I(2)),QuadOut:L(O(2)),QuadInOut:L(S(2)),QuartIn:L(I(4)),QuartOut:L(O(4)),QuartInOut:L(S(4)),QuintIn:L(I(5)),QuintOut:L(O(5)),QuintInOut:L(S(5)),SineIn:L(H),SineOut:L(J),SineInOut:L(N)},Jt=0,Nt=1,Rt=2,zt=3,Kt=4,Lt=function(t,n,r,e,i){this.id=t,this.name=n,this.target=r,this.origProps=e,this.targetProps=i,this.enabled=!0,this.length=0,this.synced=!1,this.type=Kt};Lt.prototype={w:function(t,n){for(var r=this.target[this.name],i=Math.max(t.length,n.length),o=0;o<i;o++)t[o]=e(t[o])?r[o]:t[o],n[o]=e(n[o])?r[o]:n[o];this.length=i},sync:function(){_(this)}};var Ut=0,_t=2,$t={},Vt=1,Wt=function(t,n){this.C=t,this.N=n};Wt.prototype={delay:function(t){return this.O=this.n=t,this},progress:function(t,n){return b(this,t,!0,n),et(this,0),this},time:function(t,n){return k(this,t,n,!0),this},render:function(){Y(this),d(this)},restart:function(t,n){return n=!qt(n)||n,p(this),w(this),this.resume(),this.l=t?0:this.n,n&&this.render(),this},reverse:function(){return this.i*=-1,this},timeScale:function(t){return Tt(t)&&t>0&&(this.s=t),this},clear:function(){var t=arguments;if(arguments.length>0){for(var n=[],r=0;r<arguments.length;++r)n[r]=t[r];W(this,n)}else this.t=!1,W(this);return this.N(this),this},pause:function(){return this.t=!1,this.N(this),this},resume:function(){return this.t=!0,this.N(this),this}};var Xt=function(t,n){t=t||{},this.N=n,this.P=Bt(t.onTick)?t.onTick:s,this.setFPS(t.fps),this.resume()};Xt.prototype={pause:function(){return this.t=!1,this.N(this),this},resume:function(){return this.Q=u(),this.t=!0,this.N(this),this},tick:function(t){var n=t-this.Q;if(n>this.D){var r=n%this.D;this.Q=t-r,this.P(Math.min(n-r,4*this.D)/1e3)}return this},setFPS:function(t){this.fps=Tt(t)&&t>0?t:60,this.D=1e3/this.fps}};var Yt,Zt,tn,nn,rn,en,on,an,un,sn=0;tn=["ms","moz","webkit","o"],nn="AnimationFrame",rn="request"+nn,en="cancel"+nn,Yt=window[rn],Zt=window[en];for(var hn=tn.lenght;!Yt&&hn--;)Yt=window[tn[hn]+"Request"+nn],Zt=window[tn[hn]+"Cancel"+nn];Yt=Yt||function(t){return on=u(),an=Math.max(0,16-(on-sn)),un=setTimeout(function(){t(on+an)},an),sn=on+an,un},Zt=Zt||function(t){clearTimeout(t)};var cn=Yt,fn=[],ln=[],pn=!0,vn=!1,dn=new Xt({onTick:at},ct),mn=function(t,n,r,e){this.L=t,this.C=n,this.J=r,this.K=e,this.v=Math.max(0,e-r),this.M=!0},gn=0,yn=1,Mn=2,wn=3,bn=4,kn=5,xn=7,In=function(){this.H={},this.G=[],this.R=this.i,this.m=0,this.I="",this.S=new Xt({onTick:this.tick.bind(this)},ft),this.S.pause()};In.prototype={F:function(t){if(this.T&&(t=t||this.I,this.H[t])){var n=xt(this.H,t);this.G=St(n),yt(this),this.T=!1}},define:function(t,n){var r=Ft(n);if(Qt(t)&&r!=xn){if((r==Mn||r==wn)&&!At(this.H,n))return this;r==gn&&n.restart(!0).pause(),this.H[t]=n,this.T=!0}return this},tick:function(t){return this.F(),Mt(this,t),this.t||this.S.pause(),this},delay:function(t){return this.n=Tt(t)?t:0,this},plot:function(t){return e(mt)||mt(this,t),this},reverse:function(){return this.i*=-1,this},yoyo:function(t){return this.o=!!_isBoolean(t)&&t,this},duration:function(){return this.F(),this.h},timeScale:function(t){this.s=Tt(t)?Math.max(0,t):1},time:function(t,n){return this.F(),k(this,t,n,!0),this.tick(0),this},progress:function(t,n){return this.F(),b(this,t,!0,n),this.tick(0),this},pause:function(){return this.S.pause(),this},resume:function(){return this.t=!0,this.S.resume(),this},restart:function(t){return p(this),this.resume(),this},play:function(t){if(!this.H[t])throw"Invalid label";return this.I=t,this.S.resume(),this.t=!0,this},clear:function(){this.pause()}};var On=function(){};return On.prototype={set:it(Ut,ft),tween:it(1,ft),from:it(_t,ft),to:it(3,ft),ticker:function(t){return function(n){return new Xt(n,t)}}(ft),timeline:function(){return function(t){var n=new In;return gt(n,t),n}}(),clearAll:lt("clear"),clearTweensOf:function(){console.log("todo")},pauseAll:lt("pause"),resumeAll:lt("resume"),update:vt,autoUpdate:pt,setFPS:dt},new On});